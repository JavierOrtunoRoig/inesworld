---
import { getLangFromUrl, useTranslations } from "@/i18n/utils";

import Image from "@/components/MyImage.astro";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<section class="fade-up flex flex-col justify-center p-8 xl:items-center">
	<h1 class="mb-4 text-center text-4xl font-bold uppercase sm:text-6xl">
		{t("why_me.title")}
	</h1>
	<h2 class="subtitle mb-12 tracking-wider">Making you feel the world</h2>

	<article class="md:flex md:gap-8 xl:w-2/3">
		<Image
			imagePath="/src/assets/my_way_1.jpg"
			altText="Inés cuevas / inesworld / inesworld.mov stroking a cow in a field in Switzerland"
			class="aspect-square w-full rounded-md object-cover md:w-[40%]"
			widths={[256, 700, 880, 1110, 1310, 1470, 1536]}
			sizes="(min-width: 1280px) calc(30vw - 21px), (min-width: 780px) calc(45vw - 32px), calc(100vw - 70px)"
		/>

		<div class="my-8 w-full md:my-0 md:flex md:flex-col md:justify-center xl:w-1/2">
			<h2 class="mb-4 text-center text-2xl font-bold">
				{t("why_me.reason_1.title")}
			</h2>
			<p class="md:text-center">
				{t("why_me.reason_1.description")}
			</p>
		</div>
	</article>

	<article class="md:flex md:gap-8 xl:w-2/3">
		<Image
			imagePath="/src/assets/my_way_2.jpg"
			altText="Inés cuevas / inesworld / inesworld.mov walking through the mountains of Switzerland"
			class="order-2 aspect-square w-full rounded-md object-cover md:w-[40%]"
			widths={[256, 700, 880, 1110, 1310, 1470, 1536]}
			sizes="(min-width: 1280px) calc(30vw - 21px), (min-width: 780px) calc(45vw - 32px), calc(100vw - 70px)"
		/>
		<div class="my-8 w-full md:order-1 md:flex md:flex-col md:justify-center xl:w-1/2">
			<h2 class="mb-4 text-center text-2xl font-bold">
				{t("why_me.reason_2.title")}
			</h2>
			<p class="md:text-center">{t("why_me.reason_2.description")}</p>
		</div>
	</article>

	<article id="move-image" class="md:flex md:gap-8 xl:w-2/3">
		<Image
			imagePath="/src/assets/my_way_3.jpg"
			altText="Crystal lake with a boat in the middle of the mountains of Switzerland"
			class="aspect-square w-full rounded-md object-cover object-bottom md:w-[40%]"
			widths={[256, 700, 880, 1110, 1310, 1470, 1536]}
			sizes="(min-width: 1280px) calc(30vw - 21px), (min-width: 780px) calc(45vw - 32px), calc(100vw - 70px)"
		/>
		<div class="my-8 w-full md:flex md:flex-col md:justify-center xl:w-1/2">
			<h2 class="mb-4 text-center text-2xl font-bold">
				{t("why_me.reason_3.title")}
			</h2>
			<p class="md:text-center">{t("why_me.reason_3.description")}</p>
		</div>
	</article>

	<article class="md:flex md:gap-8 xl:w-2/3">
		<Image
			imagePath="/src/assets/my_way_4.jpg"
			altText="Crystal lake with a boat in the middle of the mountains of Switzerland"
			class="order-2 aspect-square w-full rounded-md object-cover md:w-[40%]"
			widths={[256, 700, 880, 1110, 1310, 1470, 1536]}
			sizes="(min-width: 1280px) calc(30vw - 21px), (min-width: 780px) calc(45vw - 32px), calc(100vw - 70px)"
		/>
		<div class="my-8 w-full md:flex md:flex-col md:justify-center xl:w-1/2">
			<h2 class="mb-4 text-center text-2xl font-bold">
				{t("why_me.reason_4.title")}
			</h2>
			<p class="md:text-center">{t("why_me.reason_4.description")}</p>
		</div>
	</article>
</section>

<script>
	import { createIntersectionObserver, observeAll } from "@/helpers/IntersectionObserver.js";

	const runAnimation = () => {
		const fadeUpObserver = createIntersectionObserver();
		observeAll(fadeUpObserver, ".fade-up");
	};

	document.addEventListener("astro:page-load", runAnimation);
</script>

<style is:inline>
	/* change css of third article  */
	#move-image {
		img {
			object-position: 0 80%;
		}
	}
</style>
